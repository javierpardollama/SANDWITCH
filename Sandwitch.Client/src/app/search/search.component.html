<div *ngIf="!provincias" class="spinner-container">
  <div class="spinner"></div>
</div>

<form class="search-form">
  <mat-form-field class="search-half-width">
    <input matInput placeholder="Provincia" aria-label="Provincia" [matAutocomplete]="auto"
      [formControl]="provinciaCtrl">
    <mat-autocomplete #auto="matAutocomplete" (optionSelected)='FindAllPoblacionByProvinciaId($event.option.id)'>
      <mat-option *ngFor="let provincia of filteredProvincias | async" [value]="provincia.Name" [id]="provincia.Id.toString()">
        <img class="search-option-img" aria-label="provincia.Name" aria-hidden [src]="provincia.ImageUri" height="25">
        <span>{{provincia.Name}}</span>
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>

  <mat-form-field class="search-half-width" *ngIf="poblaciones">
    <input matInput placeholder="Poblacion" aria-label="Poblacion" [matAutocomplete]="auto"
      [formControl]="poblacionCtrl">
    <mat-autocomplete #auto="matAutocomplete" (optionSelected)='FindAllArenalByPoblacionId($event.option.id)'>
      <mat-option *ngFor="let poblacion of filteredPoblaciones | async" [value]="poblacion.Name" [id]="poblacion.Id.toString()">
        <img class="search-option-img" aria-label="poblacion.Name" aria-hidden [src]="poblacion.ImageUri" height="25">
        <span>{{poblacion.Name}}</span>
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>
</form>

<div class="search-result">
  <mat-card *ngFor="let arenal of arenales" class="search-card" (click)="GetRecord(arenal)">
    <mat-card-header>
      <div mat-card-avatar class="search-card-sand-image"></div>
      <mat-card-title>{{arenal.Name}}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <img class="search-card-flag-image" mat-card-image src="{{arenal.LastHistorico.Bandera.ImageUri}}"
        alt="{{arenal.LastHistorico.Bandera.Name}}">

      <mat-divider></mat-divider>

      <div class="search-card-content-line search-card-content-line-update">
        <div mat-card-avatar class="search-card-content search-card-update-image" aria-label="LastModified"></div>
        <span>{{arenal.LastHistorico.LastModified | date: 'MMM d, y h:mm a'}}</span>
      </div>

      <mat-divider></mat-divider>

      <div class="search-card-content-line">
        <div mat-card-avatar class="search-card-content search-card-warm-image" aria-label="Temperatura"></div>
        <div class="search-card-content">
          <span>{{arenal.LastHistorico.Temperatura}} ÂºC</span>
        </div>
      </div>
      <div class="search-card-content-line">
        <div class="search-card-content-tide">
          <div mat-card-avatar class="search-card-content search-card-low-tide-image" aria-label="BajaMarAlba"></div>
          <div class="search-card-content">
            <span>{{arenal.LastHistorico.BajaMarAlba}} </span>
          </div>
        </div>
        <div class="search-card-content-tide">
          <div mat-card-avatar class="search-card-content search-card-high-tide-image" aria-label="AltaMarAlba"></div>
          <div class="search-card-content">
            <span>{{arenal.LastHistorico.AltaMarAlba}}</span>
          </div>
        </div>
      </div>
      <div class="search-card-content-line">
        <div class="search-card-content-tide">
          <div mat-card-avatar class="search-card-content search-card-low-tide-image" aria-label="BajaMarOcaso"></div>
          <div class="search-card-content">
            <span>{{arenal.LastHistorico.BajaMarOcaso}}</span>
          </div>
        </div>
        <div class="search-card-content-tide">
          <div mat-card-avatar class="search-card-content search-card-high-tide-image" aria-label="AltaMarOcaso"></div>
          <div class="search-card-content">
            <span>{{arenal.LastHistorico.AltaMarOcaso}}</span>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>